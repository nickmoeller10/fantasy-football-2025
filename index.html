<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Football Cheat Sheet 2025</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tab {
            background: rgba(255,255,255,0.1);
            border: none;
            padding: 12px 20px;
            margin: 5px;
            color: white;
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .tab:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }
        
        .tab.active {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            box-shadow: 0 4px 15px rgba(255,107,107,0.4);
        }
        
        .legend {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            text-align: center;
        }
        
        .legend h3 {
            margin-top: 0;
            color: #fff;
        }
        
        .legend-item {
            display: inline-block;
            margin: 5px 10px;
            font-size: 12px;
        }

        .score-high {
            background-color: #2ecc71;
            color: white;
            font-weight: bold;
            border-radius: 4px;
        }
        
        .score-medium {
            background-color: #f39c12;
            color: white;
            font-weight: bold;
            border-radius: 4px;
        }
        
        .score-low {
            background-color: #e74c3c;
            color: white;
            font-weight: bold;
            border-radius: 4px;
        }

        #content-area {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .loading {
            text-align: center;
            padding: 50px;
            color: white;
        }
        
        .error {
            text-align: center;
            padding: 50px;
            background: rgba(234, 67, 53, 0.1);
            border-radius: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üèà Fantasy Football Cheat Sheet 2025</h1>
        <p>Comprehensive player analysis with aggregated scoring system</p>
    </div>

    <div class="tabs">
        <button class="tab active" onclick="loadPosition('qb', this)">QB</button>
        <button class="tab" onclick="loadPosition('rb', this)">RB</button>
        <button class="tab" onclick="loadPosition('wr', this)">WR</button>
        <button class="tab" onclick="loadPosition('te', this)">TE</button>
        <button class="tab" onclick="loadPosition('k', this)">K</button>
        <button class="tab" onclick="loadPosition('dst', this)">DST</button>
    </div>

    <div class="legend">
        <h3>Scoring Legend</h3>
        <div class="legend-item"><span class="score-high" style="padding: 2px 6px; border-radius: 4px;">8-10</span> Elite</div>
        <div class="legend-item"><span class="score-medium" style="padding: 2px 6px; border-radius: 4px;">5-7</span> Above Average</div>
        <div class="legend-item"><span class="score-low" style="padding: 2px 6px; border-radius: 4px;">1-4</span> Below Average</div>
        <div class="legend-item">Age Score: 25-30 = Prime (10), Rookie/35+ = Risk (1-3)</div>
    </div>

    <div id="content-area">
        <div class="loading">
            <h2>üèà Select a position tab to view rankings</h2>
            <p>Choose QB, RB, WR, TE, K, or DST from the tabs above</p>
        </div>
    </div>

    <script>
        // Global variable to track current position
        let currentPosition = null;

        // Load position data - FIXED VERSION
        function loadPosition(position, clickedTab = null) {
            // Update active tab - handle both click events and auto-load
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            if (clickedTab) {
                clickedTab.classList.add('active');
            } else {
                // Auto-load case - find the tab by position
                const tabs = document.querySelectorAll('.tab');
                tabs.forEach(tab => {
                    if (tab.textContent.trim() === position.toUpperCase()) {
                        tab.classList.add('active');
                    }
                });
            }
            
            // Show loading
            document.getElementById('content-area').innerHTML = `
                <div class="loading">
                    <h2>Loading ${position.toUpperCase()} Data...</h2>
                </div>
            `;
            
            currentPosition = position;
            
            // Load the position HTML file
            fetch(`${position}.html`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`${position}.html not found`);
                    }
                    return response.text();
                })
                .then(html => {
                    document.getElementById('content-area').innerHTML = html;
                    
                    // Load position-specific data
                    loadPositionData(position);
                })
                .catch(error => {
                    console.log(`${position}.html not found:`, error);
                    document.getElementById('content-area').innerHTML = `
                        <div class="error">
                            <h2>${position.toUpperCase()} - Coming Soon</h2>
                            <p>This position will be available in the next update!</p>
                            <p style="font-size: 12px; color: #ccc;">File: ${position}.html</p>
                        </div>
                    `;
                });
        }

        // Load position-specific data and populate tables
        function loadPositionData(position) {
            fetch(`${position}-data.js`)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`${position}-data.js not found`);
                    }
                    return response.text();
                })
                .then(jsCode => {
                    // Execute the position data JavaScript
                    eval(jsCode);
                    
                    // Call the position-specific populate function
                    if (window[`populate${position.toUpperCase()}Data`]) {
                        window[`populate${position.toUpperCase()}Data`]();
                    }
                })
                .catch(error => {
                    console.log(`No data file found for ${position}:`, error);
                });
        }

        // Utility functions that all positions can use
        function getScoreClass(score) {
            if (score >= 8) return 'score-high';
            if (score >= 5) return 'score-medium';
            return 'score-low';
        }

        function getInjuryClass(status) {
            if (status === 'Healthy') return 'healthy';
            if (status.includes('Questionable') || status.includes('Day-to-Day')) return 'questionable';
            return 'injured';
        }

        function calculateFinalScore(player, scoreFields) {
            const scores = scoreFields.map(field => player[field] || 1);
            return Math.round(scores.reduce((sum, score) => sum + score, 0) / scores.length * 10) / 10;
        }

        // Auto-load QB on page load -
        FIXED VERSION
        document.addEventListener('DOMContentLoaded', function() {
            loadPosition('qb'); // No event.target issue now
        });
    </script>

    <script>
// Debug: Force load QB data after 3 seconds
setTimeout(function() {
    console.log('Debug: Attempting to force load QB data...');
    
    // Try to access the direct URL
    fetch('qb-data.js')
        .then(response => {
            console.log('qb-data.js response status:', response.status);
            return response.text();
        })
        .then(jsCode => {
            console.log('qb-data.js content loaded, length:', jsCode.length);
            eval(jsCode);
            if (typeof populateQBData === 'function') {
                console.log('populateQBData function found, calling...');
                populateQBData();
            } else {
                console.log('populateQBData function not found');
            }
        })
        .catch(error => {
            console.error('Failed to load qb-data.js:', error);
        });
}, 3000);
</script>
</body>
</html>
